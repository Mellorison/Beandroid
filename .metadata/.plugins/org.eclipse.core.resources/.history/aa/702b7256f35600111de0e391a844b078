package com.applicake.beanstalkclient.tasks;

import android.content.SharedPreferences;
import android.os.AsyncTask;

import com.applicake.beanstalkclient.Repository;
import com.applicake.beanstalkclient.utils.HttpRetriever;
import com.applicake.beanstalkclient.utils.XmlParser;

public class DownloadRepositoryDetails extends AsyncTask<Void, Void, Repository> {
  
  private ResponseHandler<Repository> responseHandler;
  private int repoId;
  private SharedPreferences prefs;
  private Throwable exception;
  
  public DownloadRepositoryDetails(int repoId, SharedPreferences prefs, ResponseHandler<Repository> responseHandler) {
    this.responseHandler = responseHandler;
    this.repoId = repoId;
  }
  
  @Override
  protected Repository doInBackground(Void... params) {
    try {
      String repositoryXml = HttpRetriever.getRepositoryXML(prefs, repoId);
      Repository repository = XmlParser.parseRepository(repositoryXml);
      return repository;

    } catch(Throwable e) {
      
    }
  }

}
