package com.applicake.beanstalkclient.activities;

import java.util.List;

import com.applicake.beanstalkclient.utils.HttpRetriever;
import com.applicake.beanstalkclient.utils.XmlParser;

import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;

public class OverallRepoServerEnviromentsListFragment extends SpecificRepoServerEnviromentsFragment {
  
  private static final int REPOSITORY_ADD_ENVIROMENT = 0x123;
  
  @Override
  public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);
  }
  
  public class DownloadRepositoriesIdsTask extends AsyncTask<Void, Void, List<Integer>> {

    @Override
    protected List<Integer> doInBackground(Void... arg) {
      try {
        String repositoriesXml = HttpRetriever.getRepositoryListXML(prefs);
        return XmlParser.parseRepositoryIdsList(repositoriesXml);
      } catch (Exception e) {
      }
      return null;
    }

    @Override
    protected void onPostExecute(List<Integer> result) {
      new DownloadServerEnvironmentsListTask(getActivity(), result);
    }
  }
  
  @Override
  public void onClick(View view) {
  }
  
  @Override
  public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if(requestCode == REPOSITORY_ADD_ENVIROMENT && resultCode == RepositoriesActivity.RESULT_REPOSITORY) {
      
    }
  }

}
